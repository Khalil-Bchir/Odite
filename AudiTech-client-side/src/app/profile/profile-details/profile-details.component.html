<app-navbar></app-navbar>

<div class="container">
  <div class="main-body">
    <div class="row gutters-sm">
      <div class="col-md-4 mb-3">
        <div class="card">
          <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Profile Picture</h6>
          </div>
          <div class="card-body">
            <div class="d-flex flex-column align-items-center text-center">
              <img *ngIf="user.file" [src]="'http://localhost:3000/uploads/' + user.file" alt="User Image"
                (error)="handleImageError($event, user)" class="cropped-image" />
              <img *ngIf="!user.file" [src]="defaultImageSrc" alt="Default Image" class="cropped-image" />
              <div class="mt-3">
                <h4>{{ user.name }} {{ user.lastname }}</h4>
              </div>
              <div class="row">
                <div class="col-sm-12">
                  <a class="btn btn-primary" data-toggle="modal" data-target="#editimageModal">Update Profile
                    Picture</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-8">
        <div class="card mb-3">
          <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Account Details</h6>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0 text-gray-900"> <strong>Full Name</strong></h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ user.name }} {{ user.lastname }}
              </div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0 text-gray-900 text-gray-900"><strong>Email</strong></h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ user.email }}
              </div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0 text-gray-900"><strong>Registration</strong></h6>
              </div>
              <div class="col-sm-9 text-secondary">
                {{ user.userId }}
              </div>
            </div>
            <hr />
            <div class="row">
              <div class="col-sm-12">
                <a class="btn btn-primary mr-2" data-toggle="modal" data-target="#editUserModal">Edit Information</a>
                <a class="btn btn-danger btn-icon-split" data-toggle="modal" data-target="#deleteModal">
                  <span class="icon text">
                    <i class="fas fa-trash"></i>
                  </span>
                </a>
                <a class="btn btn-link ml-2" data-toggle="modal" data-target="#resetPasswordModal">Reset Password</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="editUserModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header card-header py-3">
        <h5 class="m-0 font-weight-bold text-primary">Update Profile</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-update-user></app-update-user>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="editimageModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header card-header py-3">
        <h5 class="m-0 font-weight-bold text-primary">
          Update Profile Picture
        </h5>

        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-update-file></app-update-file>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="resetPasswordModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header card-header py-3">
        <h5 class="m-0 font-weight-bold text-primary">
          Update Profile Picture
        </h5>

        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-reset-password></app-reset-password>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header card-header py-3">
          <h6 class="m-0 font-weight-bold text-primary">Delete Confirmation</h6>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-delete-user>
        </app-delete-user>
      </div>
    </div>
  </div>
</div>
